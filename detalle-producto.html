<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Detalle Producto - LovelyY5</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/styles.css">
<style>
.carousel-item img { max-height: 400px; object-fit: cover; }
.specs { font-size: 1rem; color: #555; }
</style>
</head>
<body>
<!-- Navbar -->
<div id="navbar-container">
  <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold text-primary" href="index.html">LovelyY5</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
          <li class="nav-item"><a class="nav-link" href="productos.html">Productos</a></li>
          <li class="nav-item"><a class="nav-link" href="juego.html">Juego de la Suerte</a></li>
          <li class="nav-item"><a class="nav-link" href="servicio-tecnico.html">Servicio Tecnico</a></li>
          <li class="nav-item"><a class="nav-link" href="contacto.html">Contacto</a></li>
          <li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>
          <li class="nav-item"><a class="nav-link" href="intranet.html">Intranet</a></li>
        </ul>
      </div>
    </div>
  </nav>
</div>

<div class="container py-5" id="producto-detalle"></div>

<script>
const params = new URLSearchParams(window.location.search);
const index = parseInt(params.get('id'));

fetch('ProductosDisponibles.json')
  .then(res => res.json())
  .then(productos => {
    const producto = productos[index];
    if(!producto) {
      document.getElementById('producto-detalle').innerHTML = '<p class="text-center">Producto no encontrado</p>';
      return;
    }

    const cont = document.getElementById('producto-detalle');
    cont.innerHTML = `
      <div class="row">
        <div class="col-md-6">
          <div id="carouselProducto" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
              ${(producto.imagenes || []).map((img,i) => `
                <div class="carousel-item ${i===0?'active':''}">
                  <img src="img/${img}" class="d-block w-100" alt="${producto.nombre}">
                </div>
              `).join('')}
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselProducto" data-bs-slide="prev">
              <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselProducto" data-bs-slide="next">
              <span class="carousel-control-next-icon"></span>
            </button>
          </div>
        </div>
        <div class="col-md-6">
          <h2>${producto.nombre}</h2>
          <p>${producto.descripcion}</p>
          <p class="specs">${producto.specs || ''}</p>
          <p><strong>Precio: </strong>$${producto.precio}</p>
          <p><strong>Stock: </strong>${producto.stock || ''}</p>
          <button class="btn btn-success">Agregar al carrito</button>
        </div>
      </div>
    `;
  })
  .catch(err => {
    document.getElementById('producto-detalle').innerHTML = '<p class="text-center text-danger">No se pudo cargar el producto.</p>';
  });
</script>
<!-- Carrito flotante -->
<button id="btn-carrito-flotante" type="button">
  ðŸ›’
  <span class="carrito-cantidad"></span>
</button>
<script>
  document.getElementById('btn-carrito-flotante').addEventListener('click', function() {
    window.location.href = 'carrito.html';
  });
  function actualizarCarritoFlotante() {
    const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    const cantidad = carrito.reduce((acc, item) => acc + (item.cantidad || 1), 0);
    const span = document.querySelector('#btn-carrito-flotante .carrito-cantidad');
    if (span) span.textContent = cantidad > 0 ? cantidad : '';
  }
  actualizarCarritoFlotante();
  window.addEventListener('storage', actualizarCarritoFlotante);
  setInterval(actualizarCarritoFlotante, 1000);
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<footer class="text-center py-4 text-white" style="background-color: #FFACCA;">
  <div class="mb-2">
    <a href="https://www.instagram.com/lovely.y5.tech/" target="_blank" rel="noopener" class="mx-2" title="Instagram">
      <img src="img/instagram.svg" alt="Instagram" style="width:28px;vertical-align:middle;">
    </a>
    <a href="https://facebook.com/profile.php?id=61576634015335" target="_blank" rel="noopener" class="mx-2" title="Facebook">
      <img src="img/facebook.svg" alt="Facebook" style="width:28px;vertical-align:middle;">
    </a>
    <a href="https://www.paypal.com/paypalme/sibelsama" target="_blank" rel="noopener" class="mx-2" title="PayPal">
      <img src="img/paypal.svg" alt="PayPal" style="width:28px;vertical-align:middle;">
    </a>
  </div>
  <p class="mb-0">&copy; 2025 LovelyY5 - Todos los derechos reservados</p>
</footer>
</body>
</html>
