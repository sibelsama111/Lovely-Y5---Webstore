<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LovelyY5</title>
<meta name="description" content="LovelyY5 - Compra con confianza">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/styles.css">
<link rel="icon" href="img/favicon.png">
<style>
.card-img-top { max-height: 250px; object-fit: cover; }
.card-title { font-weight: bold; }
.specs { font-size: 0.9rem; color: #555; }
#btn-carrito-flotante {
  position: fixed;
  bottom: 20px;
  right: 20px;
  font-size: 1.5rem;
  padding: 0.5rem 0.8rem;
  border-radius: 50%;
  background-color: hex(#FFACCA);
  color: white;
  border: none;
  cursor: pointer;
  z-index: 1000;
}
.carrito-cantidad {
  position: absolute;
  top: -5px;
  right: -5px;
  background: rgb(172, 74, 74);
  color: white;
  font-size: 0.8rem;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}
</style>
</head>
<body>
<!-- Navbar -->
<div id="navbar-container">
  <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold text-primary" href="index.html">LovelyY5</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
          <li class="nav-item"><a class="nav-link" href="productos.html">Productos</a></li>
          <li class="nav-item"><a class="nav-link" href="juego.html">Juego de la Suerte</a></li>
          <li class="nav-item"><a class="nav-link" href="servicio-tecnico.html">Servicio Tecnico</a></li>
          <li class="nav-item"><a class="nav-link" href="contacto.html">Contacto</a></li>
          <li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>
          <li class="nav-item"><a class="nav-link" href="intranet.html">Intranet</a></li>
        </ul>
      </div>
    </div>
  </nav>
</div>

<!-- Hero -->
<header class="hero d-flex align-items-center text-center text-white">
  <div class="container">
    <h1 class="display-4 fw-bold">Compra con confianza</h1>
    <p class="lead">Calidad verificada, precios al alcance de tu bolsillo y garantía de una buena inversión</p>
    <a href="productos.html" class="btn btn-light btn-lg mt-3">Ver todos los productos</a>
  </div>
</header>

<!-- Productos -->
<section id="productos" class="py-5">
  <div class="container">
    <h2 class="text-center mb-4">Nuestros modelos</h2>
    <div class="row g-4" id="productos-list"></div>
  </div>
</section>

<!-- Servicios resumen -->
<section id="servicios" class="py-5 bg-light">
  <div class="container text-center">
    <h2 class="mb-4">Servicio Técnico</h2>
    <p class="lead">
      Reparación y mantención de celulares, consolas, periféricos, computadoras y múltiples aparatos electrónicos y electrodomésticos.  
      <br><strong>No reparamos televisores.</strong>
    </p>
    <a href="servicio-tecnico.html" class="btn btn-primary btn-lg mt-3">Ver todos los servicios</a>
  </div>
</section>

<!-- Footer -->
<footer class="text-center py-4 text-white" style="background-color: #FFACCA;">
  <div class="mb-2">
    <a href="https://www.instagram.com/lovely.y5.tech/" target="_blank" rel="noopener" class="mx-2" title="Instagram">
      <img src="img/instagram.svg" alt="Instagram" style="width:28px;vertical-align:middle;">
    </a>
    <a href="https://facebook.com/profile.php?id=61576634015335" target="_blank" rel="noopener" class="mx-2" title="Facebook">
      <img src="img/facebook.svg" alt="Facebook" style="width:28px;vertical-align:middle;">
    </a>
    <a href="https://www.paypal.com/paypalme/sibelsama" target="_blank" rel="noopener" class="mx-2" title="PayPal">
      <img src="img/paypal.svg" alt="PayPal" style="width:28px;vertical-align:middle;">
    </a>
  </div>
  <p class="mb-0">&copy; 2025 LovelyY5 - Todos los derechos reservados</p>
</footer>

<!-- Scripts -->
 <!-- Firebase App (core) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<!-- Authentication -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<!-- Firestore -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
fetch('data/ProductosDisponibles.json')
  .then(res => res.json())
  .then(productos => {
    console.log('Productos procesados:', productos);

    const contenedor = document.getElementById('productos-list');
    contenedor.innerHTML = '';

    if (!productos.length) {
      contenedor.innerHTML = '<div class="col-12 text-center text-danger">No hay productos para mostrar.</div>';
      return;
    }

    productos.slice(0, 3).forEach((p, index) => {
      let imgSrc = 'img/default.png';
      if (Array.isArray(p.imagenes) && p.imagenes.length > 0 && p.imagenes[0]) {
        imgSrc = p.imagenes[0].startsWith('http') ? p.imagenes[0] : 'img/' + p.imagenes[0];
      }

      const card = document.createElement('div');
      card.className = 'col-md-4 producto';
      card.innerHTML = `
        <div class="card shadow-sm product-card h-100">
          <img src="${imgSrc}" class="card-img-top" alt="${p.nombre}" onerror="this.src='img/default.png'">
          <div class="card-body text-center d-flex flex-column">
            <h5 class="card-title">
              <a href="detalle-producto.html?id=${index}" class="text-decoration-none text-dark">${p.nombre}</a>
            </h5>
            <p class="card-text">${p.descripcion}</p>
            ${p.specs ? `<p class="specs">${p.specs}</p>` : ''}
            <p class="price">$${p.precio}</p>
            <button class="btn btn-success mt-auto">Agregar al carrito</button>
          </div>
        </div>
      `;
      contenedor.appendChild(card);

      // Agregar al carrito
      card.querySelector('button').addEventListener('click', () => {
        let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
        carrito.push({
          id: index,
          nombre: p.nombre,
          descripcion: p.descripcion,
          precio: p.precio,
          imagen: imgSrc
        });
        localStorage.setItem('carrito', JSON.stringify(carrito));
        alert(`${p.nombre} agregado al carrito`);
        actualizarCarritoFlotante();
      });
    });
  })
  .catch(err => {
    console.error('Error al cargar productos:', err);
    document.getElementById('productos-list').innerHTML = '<div class="col-12 text-center text-danger">No se pudieron cargar los productos.</div>';
  });

// Carrito flotante
function actualizarCarritoFlotante() {
  const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
  const cantidad = carrito.reduce((acc, item) => acc + (item.cantidad || 1), 0);
  const span = document.querySelector('#btn-carrito-flotante .carrito-cantidad');
  if (span) span.textContent = cantidad > 0 ? cantidad : '';
}

document.addEventListener('DOMContentLoaded', actualizarCarritoFlotante);
window.addEventListener('storage', actualizarCarritoFlotante);
setInterval(actualizarCarritoFlotante, 1000);
</script>

<!-- Carrito flotante -->
<button id="btn-carrito-flotante" type="button">
  🛒
  <span class="carrito-cantidad"></span>
</button>
<script>
  document.getElementById('btn-carrito-flotante').addEventListener('click', function() {
    window.location.href = 'carrito.html';
  });
  function actualizarCarritoFlotante() {
    const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    const cantidad = carrito.reduce((acc, item) => acc + (item.cantidad || 1), 0);
    const span = document.querySelector('#btn-carrito-flotante .carrito-cantidad');
    if (span) span.textContent = cantidad > 0 ? cantidad : '';
  }
  actualizarCarritoFlotante();
  window.addEventListener('storage', actualizarCarritoFlotante);
  setInterval(actualizarCarritoFlotante, 1000);
</script>

</body>
</html>
